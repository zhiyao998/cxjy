<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="lcsw.mapper.AccessoryExamMapper">

	<resultMap id="AccessoryExamMap" type="AccessoryExam" >
    	<id column="accessory_exam_id" property="accessoryExamId" jdbcType="INTEGER" />
    	<result column="case_id" property="caseId" jdbcType="INTEGER" />
    	<result column="accessory_exam_name" property="accessoryExamName" jdbcType="VARCHAR" />
    	<result column="accessory_exam_result" property="accessoryExamResult" jdbcType="VARCHAR" />
    	<result column="accessory_exam_type" property="accessoryExamType" jdbcType="VARCHAR" />
    	<result column="accessory_exam_order" property="accessoryExamOrder" jdbcType="INTEGER" />
    	<result column="score" property="score" jdbcType="DOUBLE" />
    	<result column="result_type" property="resultType" jdbcType="INTEGER" />
  	</resultMap>

	<select id="selectByPrimaryKey" parameterType="java.lang.Integer" resultMap="AccessoryExamMap">
  		select accessory_exam_id,case_id,accessory_exam_name,accessory_exam_result,accessory_exam_type,accessory_exam_order,score,result_type from tbl_accessory_exam where accessory_exam_id = #{id}
  	</select>
  	
  	<select id="selectByCaseId" parameterType="java.lang.Integer" resultMap="AccessoryExamMap">
  		select accessory_exam_id,case_id,accessory_exam_name,accessory_exam_result,accessory_exam_type,accessory_exam_order,score,result_type from tbl_accessory_exam where case_id = #{id} order by accessory_exam_type,accessory_exam_order
  	</select>
  	
  	<select id="selectAccessoryExamTypeByResultType" parameterType="java.lang.Integer" resultType="java.lang.Integer">
  		select distinct accessory_exam_type from tbl_accessory_exam where result_type = #{id}
  	</select>
  	
  	<select id="selectByAccessoryExamType" parameterType="java.lang.Integer" resultMap="AccessoryExamMap">
  		select accessory_exam_id,case_id,accessory_exam_name,accessory_exam_result,accessory_exam_type,accessory_exam_order,score,result_type from tbl_accessory_exam where accessory_exam_type = #{id} and case_id = 0
  	</select>
  	
  	<insert id="insert" parameterType="AccessoryExam" >
    	insert into tbl_accessory_exam (case_id, accessory_exam_name, accessory_exam_result, accessory_exam_type, accessory_exam_order, score, result_type)
    	values (#{caseId,jdbcType=INTEGER}, #{accessoryExamName,jdbcType=VARCHAR}, 
      	#{accessoryExamResult,jdbcType=VARCHAR}, #{accessoryExamType,jdbcType=VARCHAR}, #{accessoryExamOrder,jdbcType=INTEGER}, 
    	 #{score,jdbcType=DOUBLE} , #{resultType,jdbcType=INTEGER})
  	</insert>
  	
  	<insert id="insertByBatch" parameterType="java.util.List">
        insert into tbl_accessory_exam (case_id, accessory_exam_name, accessory_exam_result, accessory_exam_type, accessory_exam_order, score, result_type)
        values
        <foreach collection="list" item="item" index="index" separator=",">
            (#{item.caseId,jdbcType=INTEGER}, #{item.accessoryExamName,jdbcType=VARCHAR}, 
      	#{item.accessoryExamResult,jdbcType=VARCHAR}, #{item.accessoryExamType,jdbcType=VARCHAR}, #{item.accessoryExamOrder,jdbcType=INTEGER}, 
    	 #{item.score,jdbcType=DOUBLE} , #{item.resultType,jdbcType=INTEGER})
        </foreach>
    </insert>
	
	 <update id="updateByPrimaryKey" parameterType="AccessoryExam" >
    	update tbl_accessory_exam
    	set case_id = #{caseId,jdbcType=INTEGER},
      		accessory_exam_name = #{accessoryExamName,jdbcType=VARCHAR},
      		accessory_exam_result = #{accessoryExamResult,jdbcType=VARCHAR},
      		accessory_exam_type = #{accessoryExamType,jdbcType=VARCHAR},
      		accessory_exam_order = #{accessoryExamOrder,jdbcType=INTEGER},
      		score = #{score,jdbcType=DOUBLE},
      		result_type = #{resultType,jdbcType=INTEGER}
    	where accessory_exam_id = #{accessoryExamId,jdbcType=INTEGER}
  </update>
  
    <delete id="deleteByPrimaryKey">
  		delete from tbl_accessory_exam
    	where accessory_exam_id = #{id,jdbcType=INTEGER}	
 	 </delete>
  
  	<delete id="deleteByCaseId" parameterType="java.util.List">
  		delete from tbl_accessory_exam
    	where case_id in 
    	<foreach collection="list" index="index" item="item" open="(" separator="," close=")">
    		#{item}
    	</foreach>
 	 </delete>
	
</mapper>